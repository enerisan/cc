<html xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>City Care</title>
    <link rel="stylesheet" href="/style.css">
    <link rel="icon" href="public/images/logo.ico"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/choices.js/public/assets/styles/choices.min.css"/>


</head>

<body>
<div class="WrapperBoss">
    <header th:replace="~{fragments/header::header}"></header>

    <main class="PageMain">
        <div class="PageMain-centralBox CtBoxForm">
            <div class="FormContainer FormAdd">

                <form class="FormContainer-addincident Form" th:action="@{/addIncident}"
                      th:object="${incidentForm}"
                      method="post" enctype="multipart/form-data">

                <h3>Ajouter un signalement</h3>

                    <div class="input-group">
                        <input th:field="*{title}" id="title" name="title" placeholder="Titre signalement"
                               required/>
                        <label for="title">*Titre signalement</label>
                    </div>

                    <div class="location">
                        <button type="button" class="toggle-location" aria-label="Activer/Desactiver geolocalisation">
                            <svg xmlns="http://www.w3.org/2000/svg" width="37" height="26" viewBox="0 0 37 26"
                                 fill="none">
                                <rect class="bg" x="3" y="5" width="34" height="14" rx="7" fill="#212121"/>
                                <g class="knobShadow" filter="url(#filter0_ddd_2884_551)">
                                    <path fill-rule="evenodd" clip-rule="evenodd"
                                          d="M13 22C18.5228 22 23 17.5228 23 12C23 6.47715 18.5228 2 13 2C7.47715 2 3 6.47715 3 12C3 17.5228 7.47715 22 13 22Z"
                                          fill="#212121" fill-opacity="0.08"/>
                                </g>
                                <path class="knob" fill-rule="evenodd" clip-rule="evenodd"
                                      d="M13 22C18.5228 22 23 17.5228 23 12C23 6.47715 18.5228 2 13 2C7.47715 2 3 6.47715 3 12C3 17.5228 7.47715 22 13 22Z"
                                      fill="#D8D8D8"/>
                                <defs>
                                    <filter id="filter0_ddd_2884_551" x="0" y="0" width="26" height="26"
                                            filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">
                                        <feFlood flood-opacity="0" result="BackgroundImageFix"/>
                                        <feColorMatrix in="SourceAlpha" type="matrix"
                                                       values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"
                                                       result="hardAlpha"/>
                                        <feOffset dy="1"/>
                                        <feGaussianBlur stdDeviation="1.5"/>
                                        <feColorMatrix type="matrix"
                                                       values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.2 0"/>
                                        <feBlend mode="normal" in2="BackgroundImageFix"
                                                 result="effect1_dropShadow_2884_551"/>
                                        <feColorMatrix in="SourceAlpha" type="matrix"
                                                       values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"
                                                       result="hardAlpha"/>
                                        <feOffset dy="2"/>
                                        <feGaussianBlur stdDeviation="0.5"/>
                                        <feColorMatrix type="matrix"
                                                       values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.12 0"/>
                                        <feBlend mode="normal" in2="effect1_dropShadow_2884_551"
                                                 result="effect2_dropShadow_2884_551"/>
                                        <feColorMatrix in="SourceAlpha" type="matrix"
                                                       values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"
                                                       result="hardAlpha"/>
                                        <feOffset dy="1"/>
                                        <feGaussianBlur stdDeviation="0.5"/>
                                        <feColorMatrix type="matrix"
                                                       values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.14 0"/>
                                        <feBlend mode="normal" in2="effect2_dropShadow_2884_551"
                                                 result="effect3_dropShadow_2884_551"/>
                                        <feBlend mode="normal" in="SourceGraphic" in2="effect3_dropShadow_2884_551"
                                                 result="shape"/>
                                    </filter>
                                </defs>
                            </svg>
                        </button>
                        <p class="location-text">Ma localisation actuelle est celle de l'incident</p>
                    </div>

                    <div class="input-group">
                        <input th:field="*{address}" id="address" name="address" placeholder="Adresse" required/>
                        <label for="address">*Addresse</label>
                    </div>
                    <div class="city-code">
                        <div class="input-group">
                            <select class="input" id="cities" th:field="*{cityId}" required>
                                <option th:each="city : ${cities}"
                                        th:value="${city.id}"
                                        th:text="${city.name}">
                                </option>
                            </select>
                            <label for="cities">*Ville</label>
                        </div>
                        <div class="input-group input-width-control">
                            <input th:field="*{postalCode}" id="postalCode" name="postalCode" placeholder="Code postal"
                                   required/>
                            <label for="postalCode">*Code postal</label>
                        </div>
                    </div>


                    <select class="input-group input" id="categoryIds" th:field="*{categoryIds}" multiple required>
                        <option th:each="cat : ${categories}" th:value="${cat.id}" th:text="${cat.name}"></option>
                    </select>


                    <div class="AddImage">
                        <label for="image" style="cursor: pointer;">
                            <svg xmlns="http://www.w3.org/2000/svg" width="132" height="132" viewBox="0 0 132 132"
                                 fill="none">
                                <path
                                        d="M103.125 22C105.472 22 107.797 22.4624 109.965 23.3607C112.134 24.259 114.105 25.5756 115.765 27.2355C117.424 28.8953 118.741 30.8658 119.639 33.0345C120.538 35.2032 121 37.5276 121 39.875V103.125C121 105.472 120.538 107.797 119.639 109.965C118.741 112.134 117.424 114.105 115.765 115.765C114.105 117.424 112.134 118.741 109.965 119.639C107.797 120.538 105.472 121 103.125 121H39.875C37.5276 121 35.2032 120.538 33.0345 119.639C30.8658 118.741 28.8953 117.424 27.2355 115.765C25.5756 114.105 24.259 112.134 23.3607 109.965C22.4624 107.797 22 105.472 22 103.125V68.761C24.607 69.85 27.3735 70.631 30.25 71.082V103.125C30.2537 104.273 30.4425 105.362 30.8165 106.392L62.843 75.0365C65.0384 72.8873 67.9549 71.6315 71.0249 71.5136C74.095 71.3957 77.0992 72.424 79.453 74.3985L80.157 75.0365L112.178 106.397C112.552 105.371 112.743 104.28 112.75 103.125V39.875C112.75 37.3223 111.736 34.8741 109.931 33.0691C108.126 31.2641 105.678 30.25 103.125 30.25H71.082C70.642 27.4169 69.8627 24.647 68.761 22H103.125ZM69.0745 80.542L68.6125 80.927L36.674 112.205C37.6787 112.561 38.7457 112.743 39.875 112.75H103.125C104.242 112.75 105.32 112.557 106.315 112.205L74.3875 80.9325C73.691 80.2498 72.7751 79.836 71.8025 79.7646C70.8298 79.6931 69.8633 79.9685 69.0745 80.542ZM89.386 41.25C92.671 41.25 95.8214 42.555 98.1442 44.8778C100.467 47.2006 101.772 50.351 101.772 53.636C101.772 56.921 100.467 60.0714 98.1442 62.3942C95.8214 64.717 92.671 66.022 89.386 66.022C86.101 66.022 82.9506 64.717 80.6278 62.3942C78.305 60.0714 77 56.921 77 53.636C77 50.351 78.305 47.2006 80.6278 44.8778C82.9506 42.555 86.101 41.25 89.386 41.25ZM35.75 5.5C39.7225 5.5 43.6561 6.28244 47.3262 7.80264C50.9963 9.32285 54.331 11.551 57.14 14.36C59.949 17.169 62.1772 20.5037 63.6974 24.1738C65.2176 27.8439 66 31.7775 66 35.75C66 39.7225 65.2176 43.6561 63.6974 47.3262C62.1772 50.9963 59.949 54.331 57.14 57.14C54.331 59.949 50.9963 62.1772 47.3262 63.6974C43.6561 65.2176 39.7225 66 35.75 66C27.7272 66 20.033 62.813 14.36 57.14C8.68704 51.467 5.5 43.7728 5.5 35.75C5.5 27.7272 8.68704 20.033 14.36 14.36C20.033 8.68705 27.7272 5.5 35.75 5.5ZM89.386 49.5C88.8429 49.5 88.305 49.607 87.8032 49.8148C87.3014 50.0227 86.8455 50.3273 86.4614 50.7114C86.0773 51.0955 85.7727 51.5514 85.5648 52.0532C85.357 52.555 85.25 53.0928 85.25 53.636C85.25 54.1791 85.357 54.717 85.5648 55.2188C85.7727 55.7206 86.0773 56.1765 86.4614 56.5606C86.8455 56.9447 87.3014 57.2493 87.8032 57.4572C88.305 57.665 88.8429 57.772 89.386 57.772C90.4829 57.772 91.5349 57.3362 92.3106 56.5606C93.0862 55.7849 93.522 54.7329 93.522 53.636C93.522 52.5391 93.0862 51.4871 92.3106 50.7114C91.5349 49.9358 90.4829 49.5 89.386 49.5ZM35.75 16.5L35.255 16.5385C34.7055 16.6389 34.1996 16.9042 33.8047 17.2992C33.4097 17.6941 33.1444 18.2 33.044 18.7495L33 19.25V33H19.239L18.744 33.044C18.1945 33.1444 17.6886 33.4097 17.2937 33.8047C16.8987 34.1996 16.6334 34.7055 16.533 35.255L16.489 35.75L16.533 36.245C16.6334 36.7945 16.8987 37.3004 17.2937 37.6953C17.6886 38.0903 18.1945 38.3556 18.744 38.456L19.239 38.5H33V52.2665L33.044 52.7615C33.1444 53.311 33.4097 53.8169 33.8047 54.2118C34.1996 54.6068 34.7055 54.8721 35.255 54.9725L35.75 55.022L36.245 54.9725C36.7945 54.8721 37.3004 54.6068 37.6953 54.2118C38.0903 53.8169 38.3556 53.311 38.456 52.7615L38.5 52.2665V38.5H52.2775L52.7725 38.456C53.322 38.3556 53.8279 38.0903 54.2228 37.6953C54.6178 37.3004 54.8831 36.7945 54.9835 36.245L55.0275 35.75L54.9835 35.255C54.8828 34.7048 54.6166 34.1983 54.2206 33.8033C53.8246 33.4083 53.3175 33.1434 52.767 33.044L52.272 33H38.5V19.25L38.456 18.755C38.3566 18.2045 38.0917 17.6974 37.6967 17.3014C37.3017 16.9054 36.7952 16.6392 36.245 16.5385L35.75 16.5Z"
                                        fill="#124E78"/>
                            </svg>
                        </label>
                        <input type="file" th:field="*{image}" id="image" name="image" accept="image/*" placeholder="Image" style="display: none;" />
                        <p id="fileName"></p>
                    </div>



                    <div class="input-group">
                        <textarea th:field="*{description}" id="description" name="description"
                                  placeholder="Décrivez brièvement l'incident" required></textarea>
                        <label for="description">*Description</label>
                    </div>

                    <button type="submit" class="submit-button">
                        <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32" fill="none">
                            <path
                                    d="M27.1068 4.89344C26.8545 4.643 26.5381 4.46693 26.1923 4.38461C25.8466 4.30228 25.4848 4.31687 25.1468 4.42677L5.64008 10.9334C5.27831 11.0481 4.95863 11.2673 4.7214 11.5636C4.48418 11.8598 4.34006 12.2197 4.30724 12.5977C4.27443 12.9758 4.35439 13.3551 4.53703 13.6878C4.71968 14.0205 4.99681 14.2915 5.33342 14.4668L13.4268 18.4668L17.4268 26.5868C17.5875 26.9046 17.8335 27.1715 18.1373 27.3575C18.4411 27.5435 18.7906 27.6414 19.1468 27.6401H19.2801C19.6615 27.612 20.0257 27.4698 20.3253 27.2321C20.6249 26.9943 20.8461 26.6719 20.9601 26.3068L27.5601 6.85344C27.6779 6.51735 27.6979 6.1547 27.6176 5.8077C27.5374 5.46071 27.3602 5.14365 27.1068 4.89344ZM6.46675 12.7734L23.4934 7.09344L14.0401 16.5468L6.46675 12.7734ZM19.2401 25.5334L15.4534 17.9601L24.9068 8.50677L19.2401 25.5334Z"
                                    fill="white"/>
                        </svg>
                        <p>J'envoie le signalement</p>
                    </button>
                </form>


            </div>

        </div>

        <nav th:replace="~{fragments/bar::bar}" class="PageMain-bar"></nav>
    </main>
    <footer th:replace="~{fragments/footer::footer}" class="PageFooter"></footer>

</div>


<script src="https://cdn.jsdelivr.net/npm/choices.js/public/assets/scripts/choices.min.js"></script>

<script src="./script.js"></script>

</body>
</html>